# 공개키 분배 방식 설명

공개키 암호 방식은 모든 사람이 공개키와 개인키 쌍을 갖는다는 전제에서 출발합니다. 앨리스가 밥에게 암호화된 메시지를 보내려면 밥의 '공개키'가 필요합니다. 하지만 여기서 다음과 같은 근본적인 문제가 발생합니다.

**"앨리스는 자신이 얻은 공개키가 정말로 밥의 것이라고 어떻게 확신할 수 있을까요?"**

만약 공격자 이브가 중간에서 자신의 공개키를 밥의 것인 것처럼 속여서 앨리스에게 전달한다면, 이브는 앨리스가 보낸 메시지를 자신의 개인키로 복호화해서 엿볼 수 있게 됩니다. 이처럼 공개키를 안전하게 배포하고 신뢰를 보장하는 것이 공개키 암호 방식의 핵심 과제이며, 이를 해결하기 위한 방법들이 '공개키 분배 방식'입니다.

주요 공개키 분배 방식은 다음과 같이 발전해왔습니다.

### 1. 공개적인 선언 (Public Announcement)

가장 간단하지만 안전하지 않은 방식입니다.
*   **작동 방식:** 사용자가 자신의 웹사이트, 포럼, 이메일 서명 등을 통해 "내 공개키는 이것입니다"라고 단순히 공지합니다.
*   **문제점:** 위조가 매우 쉽습니다. 공격자가 특정인의 이름을 사칭하여 가짜 공개키를 얼마든지 공지할 수 있습니다. 중간자 공격에 극도로 취약하여 거의 사용되지 않습니다.

### 2. 공개키 디렉터리 (Publicly Available Directory)

중앙 기관을 두어 관리하는 방식입니다.
*   **작동 방식:** 신뢰할 수 있는 중앙 기관(Directory Authority)이 모든 사용자의 이름과 공개키 목록을 담은 데이터베이스(디렉터리)를 유지하고 관리합니다. 사용자는 이 기관에 특정인의 공개키를 질의하여 받아올 수 있습니다.
*   **장점:** 단순히 공개적으로 선언하는 것보다는 안전합니다.
*   **문제점:**
    *   **중앙화:** 디렉터리 기관이 공격당해 정보가 변조되면 전체 시스템이 위험해집니다. 또한 모든 요청이 몰려 병목 현상이 발생할 수 있습니다.
    *   **통신 취약점:** 사용자가 디렉터리에 공개키를 요청하고 응답받는 과정이 공격자에게 도청당하거나 변조될 위험이 여전히 존재합니다.

### 3. 공개키 인증 기관 (Public-Key Authority)

디렉터리 방식을 더 동적이고 안전하게 개선한 방식입니다.
*   **작동 방식:** 사용자가 실시간으로 인증 기관(Authority)에 특정인의 공개키를 요청합니다. 인증 기관은 요청된 공개키를 포함한 메시지에 **자신의 개인키로 전자서명**을 하여 응답합니다.
*   **장점:** 인증 기관의 서명이 있기 때문에, 응답 메시지가 중간에 변조되지 않았음을 보장할 수 있습니다. 타임스탬프 등을 추가하여 재전송 공격도 막을 수 있습니다.
*   **문제점:** 여전히 인증 기관이 모든 키 분배 요청에 실시간으로 관여해야 하므로 병목 현상이 발생할 수 있다는 단점이 있습니다.

### 4. 공개키 인증서 (Public-Key Certificates) - 현재 표준

위 방식들의 단점을 해결한, 현재 인터넷(HTTPS/TLS 등)에서 가장 널리 사용되는 표준 방식입니다. **공개키 기반 구조(PKI, Public Key Infrastructure)**의 핵심 요소입니다.

*   **작동 방식:**
    1.  신뢰할 수 있는 제3자, 즉 **인증 기관(CA, Certificate Authority)**이 존재합니다. (예: Let's Encrypt, DigiCert 등)
    2.  사용자(또는 서버)는 자신의 신원 정보와 공개키를 CA에 제출하여 인증서 발급을 신청합니다.
    3.  CA는 신청자의 신원을 검증한 후, "이 공개키는 이 사용자의 것이 맞습니다"라는 내용이 담긴 **공개키 인증서(Public-Key Certificate)**를 만듭니다.
    4.  CA는 이 인증서에 **자신의 개인키로 전자서명**을 합니다.
    5.  이제 사용자는 자신의 공개키가 필요할 때마다, CA가 서명한 이 인증서를 상대방에게 제시하기만 하면 됩니다.

*   **검증 과정:**
    *   앨리스가 밥의 인증서를 받으면, 앨리스의 웹 브라우저나 운영체제에는 이미 신뢰할 수 있는 주요 CA들의 공개키 목록이 내장되어 있습니다.
    *   앨리스는 이 내장된 CA의 공개키를 사용하여 밥의 인증서에 있는 CA의 서명을 검증합니다.
    *   서명이 유효하다면, 앨리스는 "이 인증서는 신뢰할 수 있는 CA가 보증한 것이므로, 인증서 안의 공개키는 진짜 밥의 것이 맞다"고 신뢰할 수 있습니다.

*   **장점:**
    *   **확장성:** CA가 모든 통신에 실시간으로 개입할 필요가 없어 병목 현상이 없습니다.
    *   **신뢰성:** 신뢰할 수 있는 CA의 서명을 통해 공개키의 소유자를 강력하게 보증합니다.
    *   **편의성:** 사용자는 인증서를 배포하기만 하면 되므로 편리합니다.

**결론적으로,** 오늘날 대부분의 안전한 통신은 제3의 신뢰 기관인 CA가 발급한 **공개키 인증서**를 통해 공개키를 안전하게 분배하고 신뢰를 확보하는 방식을 사용하고 있습니다.
